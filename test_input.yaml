---

- name: Namespaced PODs
  description: Second stage
  inputs:
  - name: name
    label: name of the cluster
    type: text
    value: test
  - name: namespace
    label: namespace to use
    type: text
    value: default
  - name: replicas
    label: number of replicas
    type: number
    value: 3
    min: 2
    max: 5
    step: 1
  steps:
  - name: get pods in selected namespace
    resource.list:
      kind: pod
      namespace: "{{inputs['namespace']}}"
    register: all_pods
  - name: list pods in selected namespaces
    log.info:
      msg: "info stage 2 {{variables['all_pods']}}"
